<!-- views/dashboard.ejs -->
<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
</head>
<body>
  <h2>Welcome, <%= user.username %> ğŸ‘‹</h2>

  <% if (error.length > 0) { %>
    <p style="color: red;"><%= error[0] %></p>
  <% } %>

  <% if (success.length > 0) { %>
    <p style="color: green;"><%= success[0] %></p>
  <% } %>

  <% posts.forEach(post => { %>
    <div style="margin-bottom: 30px; border-bottom: 1px solid #ccc; padding-bottom: 10px;">
      <img src="<%= post.image %>" alt="image" style="max-width: 300px;" /><br />
      <strong>ğŸ‘¤ <%= post.user.username %></strong><br />
      <p><%= post.caption %></p>
      
      <form action="/post/like/<%= post._id %>" method="POST" style="display: inline;">
        <% if (post.likes.includes(user.username)) { %>
          <button type="submit">â¤ï¸ Unlike</button>
        <% } else { %>
          <button type="submit">ğŸ¤ Like</button>
        <% } %>
      </form>

      <p>ğŸ‘ Likes: <%= post.likes.length %></p>
    </div>
  <% }) %>

  <a href="/post/upload">ğŸ“¤ Upload New Post</a> |
  <a href="/post/profile">ğŸ‘¤ My Profile</a> |
  <a href="/logout">ğŸšª Logout</a>
</body>
</html>
